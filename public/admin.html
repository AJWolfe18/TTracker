<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TrumpyTracker</title>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-browser-config.js"></script>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            min-height: 100vh;
        }

        /* Header Styles */
        .header {
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #334155;
        }
        .header-prod { background: #1e3a5f; }
        .header-test { background: #5f4b1e; }
        .header-title {
            font-size: 20px;
            font-weight: 600;
            margin: 0;
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .budget-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0,0,0,0.2);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
        }
        .budget-ok { color: #4ade80; }
        .budget-warning { color: #fbbf24; }
        .budget-danger { color: #f87171; }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 4px;
            padding: 12px 24px;
            background: #1e293b;
            border-bottom: 1px solid #334155;
        }
        .tab-btn {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: #94a3b8;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .tab-btn:hover { background: #334155; color: #e2e8f0; }
        .tab-btn.active {
            background: #3b82f6;
            color: white;
        }

        /* Main Content */
        .main-content {
            padding: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }

        /* Cards */
        .card {
            background: #1e293b;
            border-radius: 12px;
            border: 1px solid #334155;
            overflow: hidden;
        }
        .card-header {
            padding: 16px 20px;
            border-bottom: 1px solid #334155;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .card-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .card-body { padding: 20px; }

        /* Status Indicators */
        .status-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #334155;
        }
        .status-row:last-child { border-bottom: none; }
        .status-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        .status-icon { font-size: 18px; }
        .status-value {
            font-size: 14px;
            font-weight: 500;
        }
        .status-ok { color: #4ade80; }
        .status-warning { color: #fbbf24; }
        .status-error { color: #f87171; }
        .status-muted { color: #64748b; }

        /* Attention Items */
        .attention-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: #0f172a;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .attention-item:hover { background: #1e293b; transform: translateX(4px); }
        .attention-item:last-child { margin-bottom: 0; }
        .attention-count {
            background: #ef4444;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
        }
        .attention-count.zero {
            background: #334155;
            color: #64748b;
        }

        /* Activity Summary */
        .activity-stat {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
        }
        .activity-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        .activity-icon.stories { background: rgba(59, 130, 246, 0.2); }
        .activity-icon.articles { background: rgba(16, 185, 129, 0.2); }
        .activity-icon.enriched { background: rgba(168, 85, 247, 0.2); }
        .activity-number {
            font-size: 24px;
            font-weight: 600;
            color: #f8fafc;
        }
        .activity-label {
            font-size: 13px;
            color: #94a3b8;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        .action-btn {
            padding: 12px 20px;
            border: 1px solid #334155;
            background: #0f172a;
            color: #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .action-btn:hover {
            background: #1e293b;
            border-color: #3b82f6;
        }
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Loading State */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: #64748b;
        }
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #334155;
            border-top-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 12px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Error State */
        .error-banner {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            color: #fca5a5;
        }

        /* Auto-refresh indicator */
        .refresh-indicator {
            font-size: 12px;
            color: #64748b;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .dashboard-grid { grid-template-columns: 1fr; }
            .header { flex-direction: column; gap: 12px; }
            .quick-actions { flex-direction: column; }
            .action-btn { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef, useMemo } = React;

        // Environment detection
        function getEnvironment() {
            const url = window.SUPABASE_URL || '';
            if (url.includes('wnrjrywpcadwutfykflu')) {
                return { name: 'Test', isProd: false, label: 'Test Admin Dashboard' };
            }
            if (url.includes('osjbulmltfpcoldydexg')) {
                return { name: 'PROD', isProd: true, label: 'PROD Admin Dashboard' };
            }
            return { name: 'Unknown', isProd: false, label: 'Admin Dashboard' };
        }

        // Main App Component
        function AdminDashboard() {
            const [activeTab, setActiveTab] = useState('home');
            const [stats, setStats] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [lastRefresh, setLastRefresh] = useState(null);
            const refreshIntervalRef = useRef(null);

            const env = getEnvironment();

            // Initialize Supabase client - memoize to prevent recreation on every render
            const supabase = useMemo(() => window.supabase.createClient(
                window.SUPABASE_URL,
                window.SUPABASE_ANON_KEY
            ), []);

            // Fetch admin stats
            const fetchStats = useCallback(async () => {
                try {
                    setError(null);

                    // Call the admin-stats edge function
                    const { data, error: fnError } = await supabase.functions.invoke('admin-stats');

                    if (fnError) {
                        throw new Error(fnError.message || 'Failed to fetch stats');
                    }

                    setStats(data);
                    setLastRefresh(new Date());
                } catch (err) {
                    console.error('Error fetching stats:', err);
                    setError(err.message);

                    // If edge function fails, try direct queries as fallback
                    try {
                        await fetchStatsDirect();
                    } catch (fallbackErr) {
                        console.error('Fallback also failed:', fallbackErr);
                    }
                } finally {
                    setLoading(false);
                }
            }, [supabase]);

            // Fallback: Direct database queries
            const fetchStatsDirect = async () => {
                const now = new Date();
                const today = now.toISOString().split('T')[0];
                const last24h = new Date(now.getTime() - 24 * 60 * 60 * 1000).toISOString();

                const [
                    storiesActive,
                    storiesEnrichFailed,
                    storiesToday,
                    articlesToday,
                    articlesTotal,
                    feedsData,
                    pardonsData,
                    scotusData,
                    eosTotal,
                    budgetData,
                    lastFetch
                ] = await Promise.all([
                    supabase.from('stories').select('id', { count: 'exact', head: true }).eq('status', 'active'),
                    supabase.from('stories').select('id', { count: 'exact', head: true }).gt('enrichment_failure_count', 0),
                    supabase.from('stories').select('id', { count: 'exact', head: true }).gte('first_seen_at', last24h),
                    supabase.from('articles').select('id', { count: 'exact', head: true }).gte('fetched_at', last24h),
                    supabase.from('articles').select('id', { count: 'exact', head: true }),
                    supabase.from('feed_registry').select('id,is_active,failure_count'),
                    supabase.from('pardons').select('id,is_public,needs_review'),
                    supabase.from('scotus_cases').select('id,is_public'),
                    supabase.from('executive_orders').select('id', { count: 'exact', head: true }),
                    supabase.from('budgets').select('*').eq('day', today).single(),
                    supabase.from('feed_registry').select('last_fetched_at').not('last_fetched_at', 'is', null).order('last_fetched_at', { ascending: false }).limit(1).single()
                ]);

                // Process feeds
                const feeds = feedsData.data || [];
                const feedsActive = feeds.filter(f => f.is_active && f.failure_count < 5).length;
                const feedsFailed = feeds.filter(f => f.failure_count >= 5).length;

                // Process pardons
                const pardons = pardonsData.data || [];
                const pardonsDraft = pardons.filter(p => !p.is_public).length;
                const pardonsNeedsReview = pardons.filter(p => p.needs_review).length;

                // Process SCOTUS
                const scotus = scotusData.data || [];
                const scotusDraft = scotus.filter(s => !s.is_public).length;

                // Pipeline status
                let pipelineStatus = 'unknown';
                let pipelineMessage = 'No recent runs';
                let minutesSinceLastRun = null;

                if (lastFetch.data?.last_fetched_at) {
                    const lastRunTime = new Date(lastFetch.data.last_fetched_at);
                    minutesSinceLastRun = Math.floor((now.getTime() - lastRunTime.getTime()) / 60000);

                    if (minutesSinceLastRun < 150) {
                        pipelineStatus = 'ok';
                        pipelineMessage = `${minutesSinceLastRun} min ago`;
                    } else if (minutesSinceLastRun < 240) {
                        pipelineStatus = 'warning';
                        pipelineMessage = `${minutesSinceLastRun} min ago (delayed)`;
                    } else {
                        pipelineStatus = 'error';
                        pipelineMessage = `${minutesSinceLastRun} min ago (stale!)`;
                    }
                }

                // Build stats object
                const budget = budgetData.data;
                setStats({
                    stories: {
                        active_count: storiesActive.count ?? 0,
                        needs_review: 0, // Column may not exist yet
                        enrichment_failed: storiesEnrichFailed.count ?? 0,
                        created_today: storiesToday.count ?? 0
                    },
                    articles: {
                        total_count: articlesTotal.count ?? 0,
                        today_count: articlesToday.count ?? 0
                    },
                    feeds: {
                        total: feeds.length,
                        active: feedsActive,
                        failed: feedsFailed
                    },
                    pardons: {
                        total: pardons.length,
                        published: pardons.filter(p => p.is_public).length,
                        draft: pardonsDraft,
                        needs_review: pardonsNeedsReview
                    },
                    scotus: {
                        total: scotus.length,
                        published: scotus.filter(s => s.is_public).length,
                        draft: scotusDraft
                    },
                    executive_orders: {
                        total: eosTotal.count ?? 0
                    },
                    budget: budget ? {
                        day: budget.day,
                        spent_usd: budget.spent_usd,
                        cap_usd: budget.cap_usd,
                        openai_calls: budget.openai_calls,
                        percent_used: budget.cap_usd > 0 ? Math.round((budget.spent_usd / budget.cap_usd) * 100) : 0
                    } : {
                        day: today,
                        spent_usd: 0,
                        cap_usd: 5.00,
                        openai_calls: 0,
                        percent_used: 0
                    },
                    pipeline: {
                        status: pipelineStatus,
                        message: pipelineMessage,
                        minutes_since_last_run: minutesSinceLastRun
                    },
                    needs_attention: {
                        total: (storiesEnrichFailed.count ?? 0) + pardonsDraft + scotusDraft + feedsFailed + pardonsNeedsReview,
                        breakdown: {
                            stories_need_review: 0,
                            stories_enrichment_failed: storiesEnrichFailed.count ?? 0,
                            pardons_need_review: pardonsNeedsReview,
                            pardons_unpublished: pardonsDraft,
                            scotus_unpublished: scotusDraft,
                            feeds_failed: feedsFailed
                        }
                    },
                    timestamp: now.toISOString()
                });
                setLastRefresh(now);
            };

            // Initial fetch and auto-refresh
            useEffect(() => {
                fetchStats();

                // Auto-refresh every 5 minutes
                refreshIntervalRef.current = setInterval(fetchStats, 5 * 60 * 1000);

                return () => {
                    if (refreshIntervalRef.current) {
                        clearInterval(refreshIntervalRef.current);
                    }
                };
            }, [fetchStats]);

            // Format time since refresh
            const getTimeSinceRefresh = () => {
                if (!lastRefresh) return '';
                const seconds = Math.floor((new Date() - lastRefresh) / 1000);
                if (seconds < 60) return 'just now';
                const minutes = Math.floor(seconds / 60);
                return `${minutes}m ago`;
            };

            // Budget status
            const getBudgetStatus = () => {
                if (!stats?.budget) return { class: 'status-muted', label: 'N/A' };
                const pct = stats.budget.percent_used;
                if (pct >= 80) return { class: 'budget-danger', label: `$${stats.budget.spent_usd.toFixed(2)}/$${stats.budget.cap_usd}` };
                if (pct >= 50) return { class: 'budget-warning', label: `$${stats.budget.spent_usd.toFixed(2)}/$${stats.budget.cap_usd}` };
                return { class: 'budget-ok', label: `$${stats.budget.spent_usd.toFixed(2)}/$${stats.budget.cap_usd}` };
            };

            // Pipeline status
            const getPipelineStatus = () => {
                if (!stats?.pipeline) return { icon: '?', class: 'status-muted', label: 'Unknown' };
                const status = stats.pipeline.status;
                if (status === 'ok') return { icon: '‚úì', class: 'status-ok', label: stats.pipeline.message };
                if (status === 'warning') return { icon: '!', class: 'status-warning', label: stats.pipeline.message };
                if (status === 'error') return { icon: '‚úó', class: 'status-error', label: stats.pipeline.message };
                return { icon: '?', class: 'status-muted', label: stats.pipeline.message };
            };

            // Render tabs
            const tabs = [
                { id: 'home', label: 'Home' },
                { id: 'stories', label: 'Stories', disabled: true },
                { id: 'pardons', label: 'Pardons', disabled: true },
                { id: 'scotus', label: 'SCOTUS', disabled: true },
                { id: 'eos', label: 'Exec Orders', disabled: true },
                { id: 'feeds', label: 'Feeds', disabled: true }
            ];

            const budgetStatus = getBudgetStatus();
            const pipelineStatus = getPipelineStatus();

            return (
                <div>
                    {/* Header */}
                    <header className={`header ${env.isProd ? 'header-prod' : 'header-test'}`}>
                        <h1 className="header-title">{env.label}</h1>
                        <div className="header-right">
                            <div className="refresh-indicator">
                                <span>Updated {getTimeSinceRefresh()}</span>
                                <button
                                    onClick={() => { setLoading(true); fetchStats(); }}
                                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#94a3b8', fontSize: '14px' }}
                                    disabled={loading}
                                >
                                    {loading ? '...' : '‚Üª'}
                                </button>
                            </div>
                            <div className={`budget-indicator ${budgetStatus.class}`}>
                                <span>Budget:</span>
                                <span style={{ fontWeight: 600 }}>{budgetStatus.label}</span>
                            </div>
                        </div>
                    </header>

                    {/* Tab Navigation */}
                    <nav className="tab-nav">
                        {tabs.map(tab => (
                            <button
                                key={tab.id}
                                className={`tab-btn ${activeTab === tab.id ? 'active' : ''}`}
                                onClick={() => !tab.disabled && setActiveTab(tab.id)}
                                disabled={tab.disabled}
                                title={tab.disabled ? 'Coming soon' : ''}
                            >
                                {tab.label}
                            </button>
                        ))}
                    </nav>

                    {/* Main Content */}
                    <main className="main-content">
                        {error && (
                            <div className="error-banner">
                                <strong>Error loading stats:</strong> {error}
                            </div>
                        )}

                        {loading && !stats ? (
                            <div className="loading">
                                <div className="spinner"></div>
                                Loading dashboard...
                            </div>
                        ) : activeTab === 'home' && stats && (
                            <div className="dashboard-grid">
                                {/* System Health */}
                                <div className="card">
                                    <div className="card-header">
                                        <h2 className="card-title">
                                            <span>System Health</span>
                                        </h2>
                                    </div>
                                    <div className="card-body">
                                        <div className="status-row">
                                            <div className="status-label">
                                                <span className="status-icon">{pipelineStatus.icon === '‚úì' ? 'üü¢' : pipelineStatus.icon === '!' ? 'üü°' : pipelineStatus.icon === '‚úó' ? 'üî¥' : '‚ö™'}</span>
                                                <span>RSS Pipeline</span>
                                            </div>
                                            <div className={`status-value ${pipelineStatus.class}`}>
                                                {pipelineStatus.label}
                                            </div>
                                        </div>
                                        <div className="status-row">
                                            <div className="status-label">
                                                <span className="status-icon">{stats.feeds.failed === 0 ? 'üü¢' : stats.feeds.failed < 3 ? 'üü°' : 'üî¥'}</span>
                                                <span>Active Feeds</span>
                                            </div>
                                            <div className={`status-value ${stats.feeds.failed === 0 ? 'status-ok' : stats.feeds.failed < 3 ? 'status-warning' : 'status-error'}`}>
                                                {stats.feeds.active}/{stats.feeds.total} active
                                            </div>
                                        </div>
                                        <div className="status-row">
                                            <div className="status-label">
                                                <span className="status-icon">{stats.budget.percent_used < 50 ? 'üü¢' : stats.budget.percent_used < 80 ? 'üü°' : 'üî¥'}</span>
                                                <span>Daily Budget</span>
                                            </div>
                                            <div className={`status-value ${stats.budget.percent_used < 50 ? 'status-ok' : stats.budget.percent_used < 80 ? 'status-warning' : 'status-error'}`}>
                                                {stats.budget.percent_used}% used
                                            </div>
                                        </div>
                                        <div className="status-row">
                                            <div className="status-label">
                                                <span className="status-icon">üìä</span>
                                                <span>Active Stories</span>
                                            </div>
                                            <div className="status-value status-muted">
                                                {stats.stories.active_count.toLocaleString()}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Needs Attention */}
                                <div className="card">
                                    <div className="card-header">
                                        <h2 className="card-title">
                                            <span>Needs Attention</span>
                                            {stats.needs_attention.total > 0 && (
                                                <span className="attention-count">{stats.needs_attention.total}</span>
                                            )}
                                        </h2>
                                    </div>
                                    <div className="card-body">
                                        <div className="attention-item" title="Stories flagged for review">
                                            <span>Stories need review</span>
                                            <span className={`attention-count ${stats.needs_attention.breakdown.stories_need_review === 0 ? 'zero' : ''}`}>
                                                {stats.needs_attention.breakdown.stories_need_review}
                                            </span>
                                        </div>
                                        <div className="attention-item" title="Stories where AI enrichment failed">
                                            <span>Enrichment failures</span>
                                            <span className={`attention-count ${stats.needs_attention.breakdown.stories_enrichment_failed === 0 ? 'zero' : ''}`}>
                                                {stats.needs_attention.breakdown.stories_enrichment_failed}
                                            </span>
                                        </div>
                                        <div className="attention-item" title="Pardons not yet published">
                                            <span>Pardons unpublished</span>
                                            <span className={`attention-count ${stats.needs_attention.breakdown.pardons_unpublished === 0 ? 'zero' : ''}`}>
                                                {stats.needs_attention.breakdown.pardons_unpublished}
                                            </span>
                                        </div>
                                        <div className="attention-item" title="SCOTUS cases not yet published">
                                            <span>SCOTUS unpublished</span>
                                            <span className={`attention-count ${stats.needs_attention.breakdown.scotus_unpublished === 0 ? 'zero' : ''}`}>
                                                {stats.needs_attention.breakdown.scotus_unpublished}
                                            </span>
                                        </div>
                                        <div className="attention-item" title="Feeds with 5+ consecutive failures">
                                            <span>Feeds failed</span>
                                            <span className={`attention-count ${stats.needs_attention.breakdown.feeds_failed === 0 ? 'zero' : ''}`}>
                                                {stats.needs_attention.breakdown.feeds_failed}
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                {/* Today's Activity */}
                                <div className="card">
                                    <div className="card-header">
                                        <h2 className="card-title">Today's Activity</h2>
                                    </div>
                                    <div className="card-body">
                                        <div className="activity-stat">
                                            <div className="activity-icon articles">üì∞</div>
                                            <div>
                                                <div className="activity-number">{stats.articles.today_count}</div>
                                                <div className="activity-label">articles ingested</div>
                                            </div>
                                        </div>
                                        <div className="activity-stat">
                                            <div className="activity-icon stories">üìñ</div>
                                            <div>
                                                <div className="activity-number">{stats.stories.created_today}</div>
                                                <div className="activity-label">stories created</div>
                                            </div>
                                        </div>
                                        <div className="activity-stat">
                                            <div className="activity-icon enriched">ü§ñ</div>
                                            <div>
                                                <div className="activity-number">{stats.budget.openai_calls || 0}</div>
                                                <div className="activity-label">OpenAI calls</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Actions */}
                                <div className="card">
                                    <div className="card-header">
                                        <h2 className="card-title">Quick Actions</h2>
                                    </div>
                                    <div className="card-body">
                                        <div className="quick-actions">
                                            <button
                                                className="action-btn"
                                                onClick={() => window.open('https://github.com/AJWolfe18/TTracker/actions/workflows/rss-tracker-test.yml', '_blank')}
                                            >
                                                üîÑ Trigger Pipeline
                                            </button>
                                            <button
                                                className="action-btn"
                                                onClick={() => alert('Manual article submission coming in Phase 2')}
                                                disabled
                                            >
                                                üì∞ Submit Article
                                            </button>
                                            <button
                                                className="action-btn"
                                                onClick={() => window.open(`${window.SUPABASE_URL.replace('.supabase.co', '.supabase.co/project/default')}/editor`, '_blank')}
                                            >
                                                üóÑÔ∏è Open Supabase
                                            </button>
                                            <button
                                                className="action-btn"
                                                onClick={() => window.open('https://dev.azure.com/AJWolfe92/TTracker/_backlogs/backlog/TTracker%20Team/Backlog%20items', '_blank')}
                                            >
                                                üìã Open ADO
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                {/* Content Overview */}
                                <div className="card" style={{ gridColumn: 'span 2' }}>
                                    <div className="card-header">
                                        <h2 className="card-title">Content Overview</h2>
                                    </div>
                                    <div className="card-body">
                                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '24px' }}>
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ fontSize: '32px', fontWeight: '600', color: '#3b82f6' }}>{stats.stories.active_count.toLocaleString()}</div>
                                                <div style={{ color: '#94a3b8', fontSize: '13px' }}>Active Stories</div>
                                            </div>
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ fontSize: '32px', fontWeight: '600', color: '#10b981' }}>{stats.articles.total_count.toLocaleString()}</div>
                                                <div style={{ color: '#94a3b8', fontSize: '13px' }}>Total Articles</div>
                                            </div>
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ fontSize: '32px', fontWeight: '600', color: '#f59e0b' }}>{stats.pardons.total}</div>
                                                <div style={{ color: '#94a3b8', fontSize: '13px' }}>Pardons ({stats.pardons.published} public)</div>
                                            </div>
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ fontSize: '32px', fontWeight: '600', color: '#8b5cf6' }}>{stats.scotus.total}</div>
                                                <div style={{ color: '#94a3b8', fontSize: '13px' }}>SCOTUS Cases ({stats.scotus.published} public)</div>
                                            </div>
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ fontSize: '32px', fontWeight: '600', color: '#ec4899' }}>{stats.executive_orders.total}</div>
                                                <div style={{ color: '#94a3b8', fontSize: '13px' }}>Executive Orders</div>
                                            </div>
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ fontSize: '32px', fontWeight: '600', color: '#06b6d4' }}>{stats.feeds.total}</div>
                                                <div style={{ color: '#94a3b8', fontSize: '13px' }}>RSS Feeds ({stats.feeds.active} active)</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab !== 'home' && (
                            <div className="card">
                                <div className="card-body" style={{ textAlign: 'center', padding: '60px 20px' }}>
                                    <div style={{ fontSize: '48px', marginBottom: '16px' }}>üöß</div>
                                    <h2 style={{ margin: '0 0 8px', color: '#f8fafc' }}>Coming Soon</h2>
                                    <p style={{ color: '#94a3b8', margin: 0 }}>
                                        The {tabs.find(t => t.id === activeTab)?.label} tab is under development.
                                    </p>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        ReactDOM.render(<AdminDashboard />, document.getElementById('root'));
    </script>
</body>
</html>
