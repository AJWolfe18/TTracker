<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrumpyTracker - Admin Panel</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles that work with Tailwind */
        body {
            background: linear-gradient(135deg, #111827 0%, #1e3a8a 50%, #111827 100%);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(75, 85, 99, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .brand-gradient {
            background: linear-gradient(135deg, #60a5fa 0%, #ef4444 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-gradient {
            background: linear-gradient(135deg, #ef4444 0%, #3b82f6 100%);
        }
        
        /* Status indicators */
        .status-high { 
            background: rgba(127, 29, 29, 0.4); 
            color: #fecaca; 
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
        
        .status-medium { 
            background: rgba(113, 63, 18, 0.4); 
            color: #fef08a; 
            border: 1px solid rgba(245, 158, 11, 0.5);
        }
        
        .status-low { 
            background: rgba(20, 83, 45, 0.4); 
            color: #bbf7d0; 
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
        
        .status-archived {
            background: rgba(88, 28, 135, 0.4);
            color: #e9d5ff;
            border: 1px solid rgba(147, 51, 234, 0.5);
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div id="admin-root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        
        // Robust Base64 encoding function
        function safeBase64Encode(str) {
            try {
                // Handle Unicode characters properly
                const bytes = new TextEncoder().encode(str);
                let binary = '';
                for (let i = 0; i < bytes.byteLength; i++) {
                    binary += String.fromCharCode(bytes[i]);
                }
                return btoa(binary);
            } catch (error) {
                console.error('Base64 encoding error:', error);
                // Fallback to simple btoa for basic ASCII
                return btoa(unescape(encodeURIComponent(str)));
            }
        }

        function AdminInterface() {
            // State management
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [githubToken, setGithubToken] = useState('');
            const [entries, setEntries] = useState([]);
            const [selectedEntries, setSelectedEntries] = useState(new Set());
            const [searchTerm, setSearchTerm] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [message, setMessage] = useState(null);
            const [showArchived, setShowArchived] = useState(false);
            const [editingEntry, setEditingEntry] = useState(null);
            const [editForm, setEditForm] = useState({});

            // Message handler with auto-clear
            const showMessage = useCallback((text, type = 'info') => {
                setMessage({ text, type, id: Date.now() });
                setTimeout(() => setMessage(null), 5000);
            }, []);

            // Authentication
            const authenticate = useCallback(() => {
                if (!githubToken.trim()) {
                    showMessage('Please enter your GitHub token', 'error');
                    return;
                }
                
                if (!githubToken.startsWith('github_pat_') && !githubToken.startsWith('ghp_')) {
                    showMessage('Invalid token format. Should start with github_pat_ or ghp_', 'error');
                    return;
                }
                
                setIsAuthenticated(true);
                sessionStorage.setItem('github_token', githubToken);
                loadEntries();
                showMessage('ü§ñ Admin access granted!', 'success');
            }, [githubToken]);

            // Load entries from API
            const loadEntries = useCallback(async () => {
                try {
                    setIsLoading(true);
                    const response = await fetch('/master-tracker-log.json');
                    if (response.ok) {
                        const data = await response.json();
                        setEntries(Array.isArray(data) ? data : []);
                        showMessage(`üìä Loaded ${data?.length || 0} entries`, 'success');
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                } catch (error) {
                    console.error('Load error:', error);
                    showMessage(`Error loading entries: ${error.message}`, 'error');
                    setEntries([]);
                } finally {
                    setIsLoading(false);
                }
            }, [showMessage]);

            // GitHub API update
            const updateGitHubFile = useCallback(async (newData) => {
                const repo = 'AJWolfe18/TTracker';
                const path = 'master-tracker-log.json';
                
                try {
                    // Get current file
                    const getResponse = await fetch(`https://api.github.com/repos/${repo}/contents/${path}?ref=main`, {
                        headers: {
                            'Authorization': `Bearer ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });

                    if (!getResponse.ok) {
                        throw new Error(`Failed to get file: ${getResponse.status}`);
                    }

                    const fileInfo = await getResponse.json();
                    const content = safeBase64Encode(JSON.stringify(newData, null, 2));

                    // Update main file
                    const updateResponse = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
                        method: 'PUT',
                        headers: {
                            'Authorization': `Bearer ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Admin: Update tracker data',
                            content: content,
                            sha: fileInfo.sha,
                            branch: 'main'
                        })
                    });

                    if (!updateResponse.ok) {
                        throw new Error(`Failed to update file: ${updateResponse.status}`);
                    }

                    // Try to update public file (don't fail if it doesn't exist)
                    try {
                        const publicGetResponse = await fetch(`https://api.github.com/repos/${repo}/contents/public/${path}?ref=main`, {
                            headers: {
                                'Authorization': `Bearer ${githubToken}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        });

                        if (publicGetResponse.ok) {
                            const publicFileInfo = await publicGetResponse.json();
                            await fetch(`https://api.github.com/repos/${repo}/contents/public/${path}`, {
                                method: 'PUT',
                                headers: {
                                    'Authorization': `Bearer ${githubToken}`,
                                    'Accept': 'application/vnd.github.v3+json',
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    message: 'Admin: Update public tracker data',
                                    content: content,
                                    sha: publicFileInfo.sha,
                                    branch: 'main'
                                })
                            });
                        }
                    } catch (publicError) {
                        console.warn('Could not update public file:', publicError);
                    }

                    return true;
                } catch (error) {
                    console.error('GitHub update error:', error);
                    throw error;
                }
            }, [githubToken]);

            // Archive entries
            const archiveSelected = useCallback(async () => {
                if (selectedEntries.size === 0) {
                    showMessage('No entries selected for archiving', 'error');
                    return;
                }

                if (!confirm(`Archive ${selectedEntries.size} selected entries?`)) {
                    return;
                }

                try {
                    setIsLoading(true);
                    const updatedEntries = entries.map(entry => {
                        if (selectedEntries.has(entry.id)) {
                            return { ...entry, archived: true, archived_at: new Date().toISOString() };
                        }
                        return entry;
                    });
                    
                    await updateGitHubFile(updatedEntries);
                    setEntries(updatedEntries);
                    setSelectedEntries(new Set());
                    showMessage(`üóÉÔ∏è Archived ${selectedEntries.size} entries`, 'success');
                } catch (error) {
                    showMessage(`Error archiving: ${error.message}`, 'error');
                } finally {
                    setIsLoading(false);
                }
            }, [selectedEntries, entries, updateGitHubFile, showMessage]);

            // Restore entries
            const restoreSelected = useCallback(async () => {
                if (selectedEntries.size === 0) {
                    showMessage('No entries selected for restoration', 'error');
                    return;
                }

                try {
                    setIsLoading(true);
                    const updatedEntries = entries.map(entry => {
                        if (selectedEntries.has(entry.id)) {
                            const { archived, archived_at, ...restoredEntry } = entry;
                            return restoredEntry;
                        }
                        return entry;
                    });
                    
                    await updateGitHubFile(updatedEntries);
                    setEntries(updatedEntries);
                    setSelectedEntries(new Set());
                    showMessage(`üîÑ Restored ${selectedEntries.size} entries`, 'success');
                } catch (error) {
                    showMessage(`Error restoring: ${error.message}`, 'error');
                } finally {
                    setIsLoading(false);
                }
            }, [selectedEntries, entries, updateGitHubFile, showMessage]);

            // Delete entries
            const deleteSelected = useCallback(async () => {
                if (selectedEntries.size === 0) {
                    showMessage('No entries selected for deletion', 'error');
                    return;
                }

                if (!confirm(`Permanently delete ${selectedEntries.size} entries? This cannot be undone.`)) {
                    return;
                }

                try {
                    setIsLoading(true);
                    const updatedEntries = entries.filter(entry => !selectedEntries.has(entry.id));
                    
                    await updateGitHubFile(updatedEntries);
                    setEntries(updatedEntries);
                    setSelectedEntries(new Set());
                    showMessage(`üóëÔ∏è Deleted ${selectedEntries.size} entries`, 'success');
                } catch (error) {
                    showMessage(`Error deleting: ${error.message}`, 'error');
                } finally {
                    setIsLoading(false);
                }
            }, [selectedEntries, entries, updateGitHubFile, showMessage]);

            // Edit functions
            const startEdit = useCallback((entry) => {
                setEditingEntry(entry.id);
                setEditForm({
                    title: entry.title || '',
                    description: entry.description || '',
                    actor: entry.actor || '',
                    category: entry.category || 'Government Oversight',
                    severity: entry.severity || 'medium',
                    source_url: entry.source_url || '',
                    verified: Boolean(entry.verified),
                    date: entry.date || new Date().toISOString().split('T')[0]
                });
            }, []);

            const cancelEdit = useCallback(() => {
                setEditingEntry(null);
                setEditForm({});
            }, []);

            const saveEdit = useCallback(async () => {
                try {
                    setIsLoading(true);
                    const updatedEntries = entries.map(entry => {
                        if (entry.id === editingEntry) {
                            return {
                                ...entry,
                                ...editForm,
                                modified_at: new Date().toISOString()
                            };
                        }
                        return entry;
                    });
                    
                    await updateGitHubFile(updatedEntries);
                    setEntries(updatedEntries);
                    setEditingEntry(null);
                    setEditForm({});
                    showMessage('‚úÖ Entry updated successfully', 'success');
                } catch (error) {
                    showMessage(`Error updating: ${error.message}`, 'error');
                } finally {
                    setIsLoading(false);
                }
            }, [editingEntry, editForm, entries, updateGitHubFile, showMessage]);

            // Selection functions
            const toggleSelection = useCallback((entryId) => {
                setSelectedEntries(prev => {
                    const newSet = new Set(prev);
                    if (newSet.has(entryId)) {
                        newSet.delete(entryId);
                    } else {
                        newSet.add(entryId);
                    }
                    return newSet;
                });
            }, []);

            const selectAll = useCallback(() => {
                setSelectedEntries(prev => {
                    if (prev.size === filteredEntries.length) {
                        return new Set();
                    } else {
                        return new Set(filteredEntries.map(e => e.id));
                    }
                });
            }, []);

            // Load token from session on mount
            useEffect(() => {
                const sessionToken = sessionStorage.getItem('github_token');
                if (sessionToken) {
                    setGithubToken(sessionToken);
                }
            }, []);

            // Filter entries
            const filteredEntries = entries.filter(entry => {
                if (showArchived && !entry.archived) return false;
                if (!showArchived && entry.archived) return false;
                
                if (!searchTerm) return true;
                
                const searchLower = searchTerm.toLowerCase();
                return Object.values(entry).some(value => 
                    value?.toString().toLowerCase().includes(searchLower)
                );
            });

            // Logout
            const logout = useCallback(() => {
                setIsAuthenticated(false);
                setGithubToken('');
                sessionStorage.removeItem('github_token');
                setEntries([]);
                setSelectedEntries(new Set());
                setMessage(null);
            }, []);

            // Login screen
            if (!isAuthenticated) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-4">
                        <div className="glass-card rounded-lg p-8 max-w-md w-full">
                            <div className="text-center mb-6">
                                <div className="w-12 h-12 logo-gradient rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <span className="text-lg font-bold text-white">T2</span>
                                </div>
                                <h1 className="text-2xl font-bold brand-gradient mb-2">
                                    TrumpyTracker Admin
                                </h1>
                                <p className="text-blue-300 text-sm">Administrative Control Panel</p>
                            </div>
                            
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium mb-2 text-gray-300">
                                        üîê GitHub Access Token:
                                    </label>
                                    <input
                                        type="password"
                                        value={githubToken}
                                        onChange={(e) => setGithubToken(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && authenticate()}
                                        className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none text-white"
                                        placeholder="github_pat_... or ghp_..."
                                        autoComplete="off"
                                    />
                                    <p className="text-xs text-gray-400 mt-1">
                                        Token needs "Contents: Write" permission for TTracker repository
                                    </p>
                                </div>
                                
                                <button
                                    onClick={authenticate}
                                    disabled={!githubToken.trim()}
                                    className="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded-lg font-medium transition-colors"
                                >
                                    üöÄ Access Admin Panel
                                </button>
                                
                                {message && (
                                    <div className={`p-3 rounded-lg text-sm ${
                                        message.type === 'error' ? 'status-high' :
                                        message.type === 'success' ? 'status-low' :
                                        'bg-blue-900/30 text-blue-200 border border-blue-500/30'
                                    }`}>
                                        {message.text}
                                    </div>
                                )}
                            </div>
                            
                            <div className="mt-6 bg-gray-800/50 p-4 rounded-lg text-xs">
                                <h3 className="font-medium mb-2 text-blue-400">üõ°Ô∏è Security Notes:</h3>
                                <ul className="space-y-1 text-gray-300">
                                    <li>‚Ä¢ Token stored only for browser session</li>
                                    <li>‚Ä¢ Automatic clearance on tab close</li>
                                    <li>‚Ä¢ Create at: github.com/settings/personal-access-tokens/new</li>
                                    <li>‚Ä¢ Required: "Contents: Write" for TTracker repo</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                );
            }

            // Main admin interface
            return (
                <div className="min-h-screen flex flex-col p-4">
                    <div className="max-w-6xl mx-auto flex-1 flex flex-col">
                        <div className="glass-card rounded-lg flex flex-col flex-1 overflow-hidden">
                            {/* Header */}
                            <div className="p-6 border-b border-gray-700">
                                <div className="flex items-center justify-between mb-4">
                                    <div className="flex items-center">
                                        <div className="w-10 h-10 logo-gradient rounded-lg flex items-center justify-center mr-3">
                                            <span className="font-bold text-white">T2</span>
                                        </div>
                                        <div>
                                            <h1 className="text-xl font-bold brand-gradient">Admin Control Panel</h1>
                                            <p className="text-sm text-blue-300">Political Tracker Management</p>
                                        </div>
                                    </div>
                                    <button
                                        onClick={logout}
                                        className="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg font-medium transition-colors"
                                    >
                                        üö™ Logout
                                    </button>
                                </div>
                                
                                <div className="flex items-center gap-4 mb-4">
                                    <input
                                        type="text"
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        placeholder="üîç Search entries..."
                                        className="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none text-white"
                                    />
                                    <button
                                        onClick={loadEntries}
                                        disabled={isLoading}
                                        className="bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 px-4 py-2 rounded-lg font-medium transition-colors"
                                    >
                                        {isLoading ? 'üîÑ Loading...' : 'üìä Refresh'}
                                    </button>
                                </div>
                                
                                <div className="flex items-center gap-3 flex-wrap">
                                    <span className="text-sm text-gray-400">
                                        üìã {filteredEntries.length} entries ({selectedEntries.size} selected)
                                    </span>
                                    <button
                                        onClick={() => setShowArchived(!showArchived)}
                                        className={`px-3 py-1 rounded-lg text-sm transition-colors ${
                                            showArchived ? 'status-archived' : 'bg-gray-600 hover:bg-gray-500 text-white'
                                        }`}
                                    >
                                        {showArchived ? 'üìÇ Show Active' : 'üóÉÔ∏è Show Archives'}
                                    </button>
                                    <button
                                        onClick={selectAll}
                                        className="bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded-lg text-sm transition-colors"
                                    >
                                        {selectedEntries.size === filteredEntries.length ? '‚ùå Deselect All' : '‚úÖ Select All'}
                                    </button>
                                    {!showArchived ? (
                                        <button
                                            onClick={archiveSelected}
                                            disabled={selectedEntries.size === 0 || isLoading}
                                            className="bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded-lg text-sm transition-colors"
                                        >
                                            üóÉÔ∏è Archive ({selectedEntries.size})
                                        </button>
                                    ) : (
                                        <button
                                            onClick={restoreSelected}
                                            disabled={selectedEntries.size === 0 || isLoading}
                                            className="bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded-lg text-sm transition-colors"
                                        >
                                            üîÑ Restore ({selectedEntries.size})
                                        </button>
                                    )}
                                    <button
                                        onClick={deleteSelected}
                                        disabled={selectedEntries.size === 0 || isLoading}
                                        className="bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded-lg text-sm transition-colors"
                                    >
                                        üóëÔ∏è Delete ({selectedEntries.size})
                                    </button>
                                </div>
                            </div>
                            
                            {/* Messages */}
                            {message && (
                                <div className={`mx-6 mt-4 p-3 rounded-lg text-sm ${
                                    message.type === 'error' ? 'status-high' :
                                    message.type === 'success' ? 'status-low' :
                                    'bg-blue-900/30 text-blue-200 border border-blue-500/30'
                                }`}>
                                    {message.text}
                                </div>
                            )}
                            
                            {/* Entries List */}
                            <div className="flex-1 overflow-y-auto p-6">
                                {filteredEntries.length === 0 ? (
                                    <div className="text-center text-gray-400 py-12">
                                        <div className="text-6xl mb-4">üìä</div>
                                        <p className="text-lg">No entries found</p>
                                        <p className="text-sm mt-2">Try adjusting your search or view settings</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {filteredEntries.map((entry) => (
                                            <div
                                                key={entry.id}
                                                className={`bg-gray-800/50 border rounded-lg p-4 transition-all ${
                                                    editingEntry === entry.id ? 'border-blue-500 bg-gray-800/70' :
                                                    selectedEntries.has(entry.id) ? 'border-blue-400 bg-blue-900/20' :
                                                    entry.archived ? 'border-gray-600 opacity-75' :
                                                    'border-gray-600 hover:border-gray-500'
                                                } ${editingEntry !== entry.id ? 'cursor-pointer' : ''}`}
                                                onClick={() => editingEntry !== entry.id && toggleSelection(entry.id)}
                                            >
                                                {editingEntry === entry.id ? (
                                                    <div className="space-y-4">
                                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                            <div>
                                                            <label className="block text-xs text-gray-400 mb-1">üë§ Actor</label>
                                                            <input
                                                                type="text"
                                                                value={editForm.actor}
                                                                onChange={(e) => setEditForm({...editForm, actor: e.target.value})}
                                                                className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                placeholder="Person or organization"
                                                            />
                                                        </div>
                                                        
                                                        <div>
                                                            <label className="block text-xs text-gray-400 mb-1">üì∞ Title</label>
                                                            <input
                                                                type="text"
                                                                value={editForm.title}
                                                                onChange={(e) => setEditForm({...editForm, title: e.target.value})}
                                                                className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                placeholder="Brief headline"
                                                            />
                                                        </div>
                                                        
                                                        <div>
                                                            <label className="block text-xs text-gray-400 mb-1">üìù Description</label>
                                                            <textarea
                                                                value={editForm.description}
                                                                onChange={(e) => setEditForm({...editForm, description: e.target.value})}
                                                                className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                rows="3"
                                                                placeholder="2-3 sentence summary"
                                                            />
                                                        </div>
                                                        
                                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                            <div>
                                                                <label className="block text-xs text-gray-400 mb-1">üìÅ Category</label>
                                                                <select
                                                                    value={editForm.category}
                                                                    onChange={(e) => setEditForm({...editForm, category: e.target.value})}
                                                                    className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                >
                                                                    <option value="Financial">üí∞ Financial</option>
                                                                    <option value="Civil Liberties">‚öñÔ∏è Civil Liberties</option>
                                                                    <option value="Platform Manipulation">üì± Platform Manipulation</option>
                                                                    <option value="Government Oversight">üèõÔ∏è Government Oversight</option>
                                                                    <option value="Election Integrity">üó≥Ô∏è Election Integrity</option>
                                                                    <option value="Corporate Ethics">üè¢ Corporate Ethics</option>
                                                                    <option value="Legal Proceedings">‚öñÔ∏è Legal Proceedings</option>
                                                                </select>
                                                            </div>
                                                            <div>
                                                                <label className="block text-xs text-gray-400 mb-1">üîó Source URL</label>
                                                                <input
                                                                    type="url"
                                                                    value={editForm.source_url}
                                                                    onChange={(e) => setEditForm({...editForm, source_url: e.target.value})}
                                                                    className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                    placeholder="https://..."
                                                                />
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="flex items-center gap-4">
                                                            <label className="flex items-center gap-2 text-sm cursor-pointer">
                                                                <input
                                                                    type="checkbox"
                                                                    checked={editForm.verified}
                                                                    onChange={(e) => setEditForm({...editForm, verified: e.target.checked})}
                                                                    className="w-4 h-4"
                                                                />
                                                                <span className="text-gray-300">‚úÖ Verified Source</span>
                                                            </label>
                                                        </div>
                                                        
                                                        <div className="flex gap-3 pt-2">
                                                            <button
                                                                onClick={saveEdit}
                                                                disabled={isLoading}
                                                                className="bg-green-600 hover:bg-green-700 disabled:bg-gray-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors"
                                                            >
                                                                üíæ Save Changes
                                                            </button>
                                                            <button
                                                                onClick={cancelEdit}
                                                                className="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors"
                                                            >
                                                                ‚ùå Cancel
                                                            </button>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1 min-w-0">
                                                            <div className="flex items-center gap-2 mb-2 flex-wrap">
                                                                <span className="text-sm text-gray-400">üìÖ {entry.date}</span>
                                                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                                                    entry.severity === 'high' ? 'status-high' :
                                                                    entry.severity === 'medium' ? 'status-medium' :
                                                                    'status-low'
                                                                }`}>
                                                                    {entry.severity === 'high' ? 'üö® HIGH' :
                                                                     entry.severity === 'medium' ? '‚ö†Ô∏è MED' : 'üü¢ LOW'}
                                                                </span>
                                                                {entry.archived && (
                                                                    <span className="status-archived px-2 py-1 rounded text-xs">
                                                                        üóÉÔ∏è Archived
                                                                    </span>
                                                                )}
                                                                <span className="text-sm text-blue-400 truncate">{entry.actor}</span>
                                                            </div>
                                                            <h3 className="font-medium mb-1 text-white">{entry.title}</h3>
                                                            <p className="text-sm text-gray-300 mb-2 line-clamp-2">{entry.description}</p>
                                                            <div className="flex items-center gap-4 text-xs text-gray-400 flex-wrap">
                                                                <span>üìÅ {entry.category}</span>
                                                                {entry.verified && <span className="text-green-400">‚úÖ Verified</span>}
                                                                {entry.modified_at && (
                                                                    <span>üìù Modified: {new Date(entry.modified_at).toLocaleDateString()}</span>
                                                                )}
                                                            </div>
                                                        </div>
                                                        <div className="ml-4 flex items-start gap-2 flex-shrink-0">
                                                            <button
                                                                onClick={(e) => {
                                                                    e.stopPropagation();
                                                                    startEdit(entry);
                                                                }}
                                                                className="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs font-medium transition-colors"
                                                            >
                                                                ‚úèÔ∏è Edit
                                                            </button>
                                                            <input
                                                                type="checkbox"
                                                                checked={selectedEntries.has(entry.id)}
                                                                onChange={(e) => {
                                                                    e.stopPropagation();
                                                                    toggleSelection(entry.id);
                                                                }}
                                                                className="w-4 h-4 mt-1"
                                                            />
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<AdminInterface />, document.getElementById('admin-root'));
    </script>
</body>
</html>
                                                                <label className="block text-xs text-gray-400 mb-1">üìÖ Date</label>
                                                                <input
                                                                    type="date"
                                                                    value={editForm.date}
                                                                    onChange={(e) => setEditForm({...editForm, date: e.target.value})}
                                                                    className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                />
                                                            </div>
                                                            <div>
                                                                <label className="block text-xs text-gray-400 mb-1">‚ö†Ô∏è Severity</label>
                                                                <select
                                                                    value={editForm.severity}
                                                                    onChange={(e) => setEditForm({...editForm, severity: e.target.value})}
                                                                    className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:border-blue-500 focus:outline-none"
                                                                >
                                                                    <option value="low">üü¢ Low</option>
                                                                    <option value="medium">üü° Medium</option>
                                                                    <option value="high">üî¥ High</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        
                                                        <div>
