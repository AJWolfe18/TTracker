# Handoff: TTRC-334 Theme Preview Polish Pass

**Date:** 2025-12-27
**Branch:** test
**Commit:** 432d0ad

## Summary

Continued theme preview polish (Phase 5 items from plan). Fixed multiple UI issues and EO page data loading.

## Changes Made

### Styling Fixes
- **Summary background:** Yellow (#fef3c7) → subtle grey (#f3f4f6) in light mode
- **Modal width:** 700px → 800px for better readability
- **Sources list:** Compacted spacing (padding 12px→6px, gap 6px→2px, font smaller)
- **Emoji underline:** Fixed Official Text button emoji being underlined

### EO Page Fixes
- **Column name:** `signed_date` → `date` (was causing 400 error)
- **EO badge:** Now shows "EO 14292" instead of just "14292"
- **Categories:** Updated to match database values (health_care, gov_ops_workforce, etc.)
- **Impact labels:** Match TEST exactly (Fascist Power Grab, Authoritarian Overreach, etc.)

### Actor Name Formatting
- Added `formatActorName()` in theme-shared.js
- Converts entity codes: "US-ERIC-ADAMS" → "Eric Adams"
- Used in StoryCard and StoryDetailModal

## Files Modified
- `public/themes.css` - Styling fixes
- `public/theme-preview.js` - Actor formatting
- `public/theme-shared.js` - formatActorName() helper
- `public/eo-theme-preview.js` - EO column fix, categories, badge

## New JIRA Tickets
- **TTRC-335:** Promote Theme Preview to Main Frontend (future work)

## Remaining Phase 5 Items (Manual Testing)
- [ ] Keyboard navigation (Esc, Tab, dropdowns)
- [ ] Deep-linking (CRITICAL: fresh load close test)
- [ ] Fetch failure/error states
- [ ] Mobile responsive + Safari scroll lock
- [ ] Both themes + a11y smoke test

## Notes
- Config mappings (categories, impact labels) are hardcoded in JS - matches current TEST pattern
- Future: Could pull from DB via category_config table
- Entities table for actor display names is tracked in TTRC-335

## Plan File
`C:\Users\Josh\.claude\plans\sorted-jingling-crayon.md`
